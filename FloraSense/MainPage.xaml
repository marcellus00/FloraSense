<Page
    x:Class="FloraSense.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="using:FloraSense"
    Background="{ThemeResource SystemControlAcrylicWindowBrush}"
    mc:Ignorable="d"
    d:DesignWidth="500"
    d:DesignHeight="700"
    DataContext="{Binding RelativeSource={RelativeSource Self}}">

    <Page.Resources>
        <ResourceDictionary>
            <local:SampleData x:Key="SampleData"/>
            <DataTemplate x:Key="PlantTemplate">
                <RelativePanel Margin="5" Height="200" Width="200">
                    <Rectangle Fill="{ThemeResource SystemControlAcrylicElementBrush}"/>
                    <Image Source="Assets/potted-plant_white.png" Stretch="Uniform" HorizontalAlignment="Left"/>
                    <StackPanel>
                        <TextBlock Text="{Binding Name, Mode=OneWay}" FontWeight="Bold"/>
                        <TextBlock TextAlignment="Left">
                                💦 <Run Text="{Binding Moisture, Mode=OneWay}"/>%
                        </TextBlock>
                        <TextBlock TextAlignment="Center">
                                ☀️ <Run Text="{Binding Brightness, Mode=OneWay}"/> lux
                        </TextBlock>
                        <TextBlock TextAlignment="Center">
                                🐇 <Run Text="{Binding Fertility, Mode=OneWay}"/> µS/cm
                        </TextBlock>
                        <TextBlock TextAlignment="Right">
                                🌡️ <Run Text="{Binding Temperature, Mode=OneWay}"/>°C
                        </TextBlock>
                    </StackPanel>
                </RelativePanel>

            </DataTemplate>
        </ResourceDictionary>
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <ProgressBar Grid.Row="0" x:Name="ProgressBar" IsIndeterminate="True" Visibility="Collapsed"/>
        <ScrollViewer Grid.Row="1" VerticalScrollMode="Auto" VerticalScrollBarVisibility="Auto">

            <GridView  ItemsSource="{Binding KnownDevices}"
                       ItemTemplate="{StaticResource PlantTemplate}"
                       d:DataContext="{StaticResource SampleData}"/>

        </ScrollViewer>
        <CommandBar Grid.Row="2" DefaultLabelPosition="Right" ClosedDisplayMode="Minimal">
            <AppBarButton Icon="Add" Label="Add sensor" Click="RefreshButton_Click"/>
            <AppBarButton Icon="Refresh" Label="Refresh" Click="RefreshButton_Click"/>
            <AppBarButton Icon="Setting" Label="Settings" HorizontalAlignment="Left"/>
        </CommandBar>
    </Grid>
</Page>
